{% extends 'layout.jinja2' %}

{% block content %}

<!-- Motor Control Interface -->
<div id="motorControl">
    <!-- Create button -->
    <h1>Motor Control</h1>
    <input onclick="toggle_motor()" type="button" value="Enable Motor" id="motorStatus"></input>


    <!-- Create power slider -->
    <div >
        <input onclick="toggle_power()" type="button" value="Power Disabled" id="powerStatus"></input>
        <p>Power Value: <span id="displayPower" onload="update_power_slider()"></span></p>
        <input type="range" min="-1" max="1" value="0" step="0.1" class="slider" id="motorPower" oninput="update_power_slider()" onchange="send_motor_power()">
    </div>

    <!-- Create encoder position text box
    <div class="encoder_pos_containter">
        <input type="text" id="fname" name="fname"><br><br>
    </div>
        <label for="fname">Position value:</label>
        <input type="submit" value="Submit"> -->
    <!-- Create encoder speed slider -->
    

    <div class="encoder_slider_container">
        <input onclick="toggle_speed()" type="button" value="Speed Disabled" id="speedStatus"></input>
        <p>Encoder Speed: <span id="displaySpeed" onload="update_speed_slider()"></span></p>
        <input type="range" min="-3" max="3" value="0" step="0.1" class="slider" id="encoderSpeed" oninput="update_speed_slider()" onchange="send_encoder_speed()">
    </div>

    <div >
        <input onclick="toggle_position()" type="button" value="Position Enabled" id="positionStatus"></input>
        <p>Position Location:</p>
        <form method="POST" action="/">
            {{ form_target.csrf_token }}
            <div>{{ form_target.json.label }} {{ form_target.json(size=20) }}</div>
            {{ form_target.submit }}
        </form>
    </div>
    
</div>

<div id="upload" class="uploadbox" align="center">
    <br>
    <p class="semibold" style="top:200px">Select a file to upload:</p>
    <form method="post" action="/" enctype="multipart/form-data">
        <br>
        <dl>
        <p>
            <input id="file" type="file" class="inputfile" name="file" autocomplete="off" accept="text/plain" required/>
        <label for="file" class="semibold">Browse Files</label>
        </p>
        </dl>
        <p>
            <input type="submit" id="uploadFileButton" class="button semibold blue1" value="Deploy Robot">
        </p>
        <br>
    </form>
    <!-- Progress Bar -->
    <label for="deploymentProgress">Deployment progress:</label>
    <progress id="deploymentProgress" value="0" max="100"> </progress>

</div>

<!-- <div>
    <label for="deployment">Choose a deployment file:</label>
    <input type="file" id="deployment_file" name="deployment" accept="text/plain">
    <input onclick="deploy_robot()" type="button" value="Deploy Robot" id="deplot_robot"></input>
</div> -->

<!-- Refresh page button -->
<button onclick="window.location.href='/';">
    Refresh
</button>

<!-- Serial Send (Line by Line) -->
<div>
    <h2>Serial Send</h2>
    <form method="POST" action="/">
        {{ form_long.csrf_token }}
        <div>{{ form_long.json.label }} {{ form_long.json(size=20) }}</div>
        {{ form_long.submit }}
    </form>
</div>

<!-- Incoming/Outgoing Display -->
<div id="outgoing">
    <h2>Outgoing</h2>
    {{ outgoing }}
</div>
<div>
    <h2>Incoming</h2>
    <!-- {{ incoming }} -->
    <div  id="incoming"> </div>
    <table class = "table" id="sqlTable">
    </table>
    

</div>


<script type="text/javascript" src="{{url_for('static', filename='javascript/controls.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='javascript/visualization.js')}}"></script>

{% endblock %}
